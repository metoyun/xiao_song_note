(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{728:function(e,t,r){"use strict";r.r(t);var n=r(95),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("blockquote",[r("p",[e._v("修改Nginx记得重启Nginx")])]),e._v(" "),r("h1",{attrs:{id:"nginx代理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nginx代理"}},[e._v("#")]),e._v(" Nginx代理")]),e._v(" "),r("div",{staticClass:"language-conf extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('location /admin/ #代理名称\n    {\n        proxy_pass ip或域名;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header REMOTE-HOST $remote_addr;\n        \n        #缓存相关配置\n        #proxy_cache cache_one;\n        #proxy_cache_key $host$request_uri$is_args$args;\n        #proxy_cache_valid 200 304 301 302 1h;\n        \n        #持久化连接相关配置\n        proxy_connect_timeout 3000s;\n        proxy_read_timeout 86400s;\n        proxy_send_timeout 3000s;\n        # proxy_http_version 1.1;\n        # proxy_set_header Upgrade $http_upgrade;\n        # proxy_set_header Connection "upgrade";\n        \n        #        \n        #expires 12h;\n    }\n     location /socket {  \n         proxy_pass ip或域名;   \n         proxy_connect_timeout 3600s; #配置点1 \n         proxy_read_timeout 3600s; #配置点2,如果没效,可以考虑这个时间配置长一点 \n         proxy_send_timeout 3600s; #配置点3 \n         proxy_set_header Host $host;\n         proxy_set_header X-Real-IP $remote_addr;\n         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n         proxy_set_header REMOTE-HOST $remote_addr;\n         #proxy_bind $remote_addr transparent;\n         proxy_http_version 1.1;\n         proxy_set_header Upgrade $http_upgrade;\n         proxy_set_header Connection "upgrade";\n         rewrite /socket/(.*) /$1 break;\n         proxy_redirect off;\n     \n     }\n')])])]),r("h1",{attrs:{id:"nginx自定义访问日志"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nginx自定义访问日志"}},[e._v("#")]),e._v(" Nginx自定义访问日志")]),e._v(" "),r("div",{staticClass:"language-conf extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('# mylog 自定义日志名称\nlog_format  mylog  \n        \'-------------------------------------------------------------------------------------------------------------------\n|请求IP（remote_addr）:             $remote_addr      \n|连接序列号（connection）:              $connection\n|当前通过连接发出的请求数量（connection_requests）: $connection_requests\n|户端用户名称（remote_user）:          $remote_user                  \n|标准格式的本地时间（time_iso8601）:      $time_iso8601\n|通用日志格式下的本地时间（time_local）:            $time_local   \n|完整的原始请求行（request）:               $request          \n|完整的请求地址（request_uri）:             $request_uri          \n|响应状态码（status）:                  $status                      \n|发送给客户端的字节数，不包括响应头的大小（body_bytes_sent）:      $body_bytes_sent            \n|请求的referer地址（http_referer）:  $http_referer            \n|记录客户端浏览器相关信息（http_user_agent）:      $http_user_agent         \n|(反向)记录客户端IP地址（http_x_forwarded_for）: "  $http_x_forwarded_for       \n|压缩（gzip_ratio）:              $gzip_ratio                  \n|请求处理时长（request_time）: $request_time                 \n|发送给客户端的总字节数（bytes_sent）:              $bytes_sent                  \n|请求长度（包括请求行，请求头和请求体）（request_length）:            $request_length      \n|如果请求是通过http流水线发送，则其值为"p"，否则为“."（pipe）:      $pipe        \n|日志写入时间，单位为秒，精度是毫秒（msec）:           $msec                        \n-------------------------------------------------------------------------------------------------------------------\';\n\n\n')])])]),r("h1",{attrs:{id:"使用自定义日志"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用自定义日志"}},[e._v("#")]),e._v(" 使用自定义日志")]),e._v(" "),r("div",{staticClass:"language-conf extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("\nserver\n    {\n        # 将mylog 放到后面\n        access_log  /www/wwwlogs/access.log mylog;\n    }\n\n\n")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);