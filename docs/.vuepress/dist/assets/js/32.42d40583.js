(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{731:function(e,t,n){"use strict";n.r(t);var r=n(98),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"nginx代理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx代理"}},[e._v("#")]),e._v(" Nginx代理")]),e._v(" "),n("div",{staticClass:"language-ini extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ini"}},[n("code",[e._v("location /admin/ #代理名称\n    {\n        proxy_pass ip或域名;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header REMOTE-HOST $remote_addr;\n        \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("        #缓存相关配置")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("        #proxy_cache cache_one;")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("        #proxy_cache_key $host$request_uri$is_args$args;")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("        #proxy_cache_valid 200 304 301 302 1h;")]),e._v("\n        \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("        #持久化连接相关配置")]),e._v("\n        proxy_connect_timeout 3000s;\n        proxy_read_timeout 86400s;\n        proxy_send_timeout 3000s;\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("        # proxy_http_version 1.1;")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("        # proxy_set_header Upgrade $http_upgrade;")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v('        # proxy_set_header Connection "upgrade";')]),e._v("\n        \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("        #        ")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("        #expires 12h;")]),e._v("\n    }\n     location /socket {  \n         proxy_pass ip或域名;   \n         proxy_connect_timeout 3600s; #配置点1 \n         proxy_read_timeout 3600s; #配置点2,如果没效,可以考虑这个时间配置长一点 \n         proxy_send_timeout 3600s; #配置点3 \n         proxy_set_header Host $host;\n         proxy_set_header X-Real-IP $remote_addr;\n         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n         proxy_set_header REMOTE-HOST $remote_addr;\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("         #proxy_bind $remote_addr transparent;")]),e._v('\n         proxy_http_version 1.1;\n         proxy_set_header Upgrade $http_upgrade;\n         proxy_set_header Connection "upgrade";\n         rewrite /socket/(.*) /$1 break;\n         proxy_redirect off;\n     \n     }\n')])])]),n("h1",{attrs:{id:"nginx自定义日志"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx自定义日志"}},[e._v("#")]),e._v(" Nginx自定义日志")]),e._v(" "),n("div",{staticClass:"language-conf extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("# mylog 自定义日志名称\nlog_format  mylog  \n        '----------------------------------------------------------------------------------------------------------------------------\n        |请求IP:             $remote_addr                    \n        |户端用户名称:          $remote_user                  \n        |标准格式下的本地时间:      $time_iso8601               \n        |请求协议:               $request                    \n        |状态:                  $status                      \n        |发送给客户端的字节数:      $body_bytes_sent            \n        |记录从哪个页面链接访问过来的:  $http_referer            \n        |记录客户端浏览器相关信息:      $http_user_agent         \n        |(反向)记录客户端IP地址: \"  $http_x_forwarded_for       \n        |未知字段:              $gzip_ratio                  \n        |发送给客户端的总字节数: $request_time                 \n        |未知字段:              $bytes_sent                  \n        |请求的长度:            $request_length              \n        |日志写入时间:           $msec                        \n        ----------------------------------------------------------------------------------------------------------------------------'\n\n\n")])])]),n("h1",{attrs:{id:"使用自定义日志"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用自定义日志"}},[e._v("#")]),e._v(" 使用自定义日志")]),e._v(" "),n("div",{staticClass:"language-conf extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("\nserver\n    {\n        # 将mylog 放到后面\n        access_log  /www/wwwlogs/access.log mylog;\n    }\n\n\n")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);